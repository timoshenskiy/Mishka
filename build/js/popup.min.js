var ESC_KEY=27,HIDE_CLASS="cart-popup--close",SHOW_CLASS="cart-popup__wrapper--animated",CART_POPUP_SELECTOR=".cart-popup",CART_POPUP_WRAPPER_SELECTOR=".cart-popup__wrapper",CART_POPUP_CONTROLS_SELECTOR=".size-controls__radio",CART_BUTTON_SELECTOR=".catalog__button",ORDER_BUTTON_SELECTOR=".week-offer__order-link",cartPopup=document.querySelector(CART_POPUP_SELECTOR),cartPopupWrapper=document.querySelector(CART_POPUP_WRAPPER_SELECTOR),orderButton=document.querySelector(ORDER_BUTTON_SELECTOR),cartButtons=document.querySelectorAll(CART_BUTTON_SELECTOR),controls=document.querySelector(CART_POPUP_CONTROLS_SELECTOR),closePopup=function(){cartPopup.classList.add(HIDE_CLASS),cartPopupWrapper.classList.remove(SHOW_CLASS),cartPopup.removeEventListener("click",cartBackgroundClickHandler),document.removeEventListener("keydown",escapeButtonKeydownHandler)},openPopup=function(){cartPopup.classList.remove(HIDE_CLASS),cartPopupWrapper.classList.add(SHOW_CLASS),controls.focus(),cartPopup.addEventListener("click",cartBackgroundClickHandler),document.addEventListener("keydown",escapeButtonKeydownHandler)},orderButtonClickHandler=function(e){e.preventDefault(),openPopup()},cartBackgroundClickHandler=function(e){cartPopup===e.target&&closePopup()},escapeButtonKeydownHandler=function(e){e.keyCode===ESC_KEY&&closePopup()};if(orderButton&&orderButton.addEventListener("click",orderButtonClickHandler),cartButtons)for(var i=0;i<cartButtons.length;i++)cartButtons[i].addEventListener("click",orderButtonClickHandler);